ENUM role {
  RoleUser
  RoleAdmin
}

ENUM reaction_type {
  Like
  Dislike
}

TABLE countries {
  country_id SMALLSERIAL [pk]
  english_name VARCHAR(60) [not null, unique]
}

TABLE cities {
  city_id SERIAL [pk]
  english_name VARCHAR(60) [not null]
  country_id SMALLINT [ref: > countries.country_id, not null]
}

TABLE universities {
  university_id SMALLSERIAL [pk]
  original_name VARCHAR(500) [not null]
  english_name VARCHAR(255)
  link_to_website VARCHAR(2048)
  deleted_at TIMESTAMPTZ 
  city_id INTEGER [ref: > cities.city_id, not null]
}

TABLE university_majors {
  university_major_id SMALLSERIAL [pk]
  name VARCHAR(50) [unique, not null]
}

TABLE user_statuses {
  user_status_id SMALLSERIAL [pk]
  name VARCHAR(20) [not null]
}

TABLE user_credentials {
  user_credential_id SERIAL [pk]
  username VARCHAR(20) [unique, not null]
  password TEXT [not null]
}

TABLE user_descriptions {
  user_description_id SERIAL [pk]
  text_content VARCHAR(500) [not null]
  updated_at TIMESTAMPTZ 
}

TABLE user_notifications {
  user_notification_id SERIAL [pk]
  mail VARCHAR(254) [unique]
  is_mail_notification_enabled BOOLEAN [not null]
}

TABLE users {
  user_id SERIAL [pk]
  nick VARCHAR(20) [not null]
  avatar_key VARCHAR(255)
  created_at TIMESTAMPTZ [not null]
  deleted_at TIMESTAMPTZ
  user_credential_id INTEGER [ref: - user_credentials.user_credential_id, not null]
  user_description_id INTEGER [ref: - user_descriptions.user_description_id, not null]
  user_notification_id INTEGER [ref: - user_notifications.user_notification_id, not null]
  user_status_id SMALLINT [ref: > user_statuses.user_status_id]
  home_university_id SMALLINT [ref: > universities.university_id]
  country_of_origin_id SMALLINT [ref: > countries.country_id]
}

TABLE user_roles {
  user_credential_id INTEGER [pk, ref: > user_credentials.user_credential_id]
  role ROLE [pk]
}

TABLE university_reviews {
  university_review_id SERIAL [pk]
  text_content VARCHAR(1000) [not null]
  star_rating SMALLINT [not null]
  created_at TIMESTAMPTZ [not null]
  deleted_at TIMESTAMPTZ 
  author_id INTEGER [ref: > users.user_id, not null]
  university_id SMALLINT [ref: > universities.university_id, not null]
}

TABLE university_review_reactions {
  university_review_reaction_id BIGSERIAL [pk]
  reaction_type REACTION_TYPE [not null]
  university_review_id INTEGER [ref: > university_reviews.university_review_id, not null]
  author_id INTEGER [ref: > users.user_id, not null]
}

TABLE university_reviews_reaction_counts {
  university_review_id INTEGER [pk, ref: > university_reviews.university_review_id]
  reaction_type REACTION_TYPE [pk]
  count SMALLINT [not null]
}

TABLE user_follows {
  follower_id INTEGER [pk, ref: > users.user_id, not null]
  followee_id INTEGER [pk, ref: > users.user_id, not null]
}

TABLE university_follows {
  follower_id INTEGER [pk, ref: > users.user_id, not null]
  university_id SMALLINT [pk, ref: > universities.university_id, not null]
}

TABLE exchanges {
  exchange_id SERIAL [pk]
  started_at DATE [not null]
  end_at DATE [not null]
  user_id INTEGER [ref: > users.user_id, not null]
  university_major_id SMALLINT [ref: > university_majors.university_major_id, not null]
  university_id SMALLINT [ref: > universities.university_id, not null]
}

TABLE refresh_tokens {
  refresh_token_id UUID [pk]
  hashed_token TEXT [not null]
  created_at TIMESTAMPTZ [not null]
  expires_at TIMESTAMPTZ [not null]
  is_revoked BOOLEAN [not null]
  device_id UUID [not null]
  device_name VARCHAR(255)
  ip_address VARCHAR(45)
  user_id INTEGER [ref: > users.user_id, not null]
}


